<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-blog" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Essential modules for developing applications with FastAPI (P2 - Logging) | Immersed in Code</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://immersedincode.io.vn/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Essential modules for developing applications with FastAPI (P2 - Logging) | Immersed in Code"><meta data-rh="true" name="description" content="Back to FastAPI again."><meta data-rh="true" property="og:description" content="Back to FastAPI again."><meta data-rh="true" property="og:image" content="https://immersedincode.io.vn/img/02_essential-modules-for-developing-applications-with-fastapi-p1/featured.png"><meta data-rh="true" name="twitter:image" content="https://immersedincode.io.vn/img/02_essential-modules-for-developing-applications-with-fastapi-p1/featured.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-04-01T10:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/pxuanbach"><meta data-rh="true" property="article:tag" content="logging,fastapi,python,essential-modules-fastapi"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://immersedincode.io.vn/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging"><link data-rh="true" rel="alternate" href="https://immersedincode.io.vn/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging" hreflang="en"><link data-rh="true" rel="alternate" href="https://immersedincode.io.vn/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://immersedincode.io.vn/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging","mainEntityOfPage":"https://immersedincode.io.vn/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging","url":"https://immersedincode.io.vn/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging","headline":"Essential modules for developing applications with FastAPI (P2 - Logging)","name":"Essential modules for developing applications with FastAPI (P2 - Logging)","description":"Back to FastAPI again.","datePublished":"2024-04-01T10:00:00.000Z","author":{"@type":"Person","name":"Bach Pham","description":"Software Engineer","url":"https://github.com/pxuanbach","image":"https://avatars.githubusercontent.com/u/55500268?v=4"},"image":{"@type":"ImageObject","@id":"https://immersedincode.io.vn/img/02_essential-modules-for-developing-applications-with-fastapi-p1/featured.png","url":"https://immersedincode.io.vn/img/02_essential-modules-for-developing-applications-with-fastapi-p1/featured.png","contentUrl":"https://immersedincode.io.vn/img/02_essential-modules-for-developing-applications-with-fastapi-p1/featured.png","caption":"title image for the blog post: Essential modules for developing applications with FastAPI (P2 - Logging)"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://immersedincode.io.vn/blog","name":"My Awesome Blog"}}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2VH0PJCNSH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2VH0PJCNSH",{anonymize_ip:!0})</script>





<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Immersed in Code RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Immersed in Code Atom Feed"><link rel="stylesheet" href="/assets/css/styles.71c12977.css">
<script src="/assets/js/runtime~main.62011bc0.js" defer="defer"></script>
<script src="/assets/js/main.e761aa2e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Immersed in Code Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Immersed in Code Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Immersed in Code</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/about">About</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/pxuanbach" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">My GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2026</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/my-perspectives-on-ai-agents-beyond-the-vibe-coding-hype">My Perspectives on AI Agents: Beyond the &#x27;Vibe-Coding&#x27; Hype</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/happy-new-year-2025">Happy New Year 2025</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/essential-modules-for-developing-applications-with-fastapi-p6-monitoring">Essential modules for developing applications with FastAPI (P6 - Monitoring)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/essential-modules-for-developing-applications-with-fastapi-p5-rate-limiting">Essential modules for developing applications with FastAPI (P5 - Rate-limiting)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/essential-modules-for-developing-applications-with-fastapi-p4-job-scheduler">Essential modules for developing applications with FastAPI (P4 - Job Scheduler)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/asynchronous-request-batching-design-pattern-in-nodejs">Asynchronous Request Batching Design Pattern in Node.js</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/destructuring-in-python">Destructuring in Python</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/essential-modules-for-developing-applications-with-fastapi-p3-caching">Essential modules for developing applications with FastAPI (P3 - Caching)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/dockerizing-medusajs-for-optimized-deployment">Dockerize MedusaJS Components: Optimize and Deploy Your Application</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging">Essential modules for developing applications with FastAPI (P2 - Logging)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/essential-modules-for-developing-applications-with-fastapi-p1-migration">Essential modules for developing applications with FastAPI (P1 - Migration)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/zero-downtime-deployment-with-docker-compose-nginx">Zero-downtime Deployments with Docker Compose &amp; Nginx</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/welcome">Welcome</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Essential modules for developing applications with FastAPI (P2 - Logging)</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-04-01T10:00:00.000Z">April 1, 2024</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/pxuanbach" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/55500268?v=4" alt="Bach Pham"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/pxuanbach" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp" translate="no">Bach Pham</span></a></div><small class="authorTitle_nd0D" title="Software Engineer">Software Engineer</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>Back to FastAPI again.</p>
<p>This post comes with Logging module that you will want to have in your project.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="frameworklibrary-version">Framework/Library version<a href="#frameworklibrary-version" class="hash-link" aria-label="Direct link to Framework/Library version" title="Direct link to Framework/Library version" translate="no">​</a></h2>
<p>This project uses <a href="https://www.python.org/" target="_blank" rel="noopener noreferrer" class="">Python</a> 3.10 as the environment and <a href="https://python-poetry.org/" target="_blank" rel="noopener noreferrer" class="">Poetry</a> as the package manager.</p>
<p>The code and examples in this post will use frameworks/libraries with the following versions.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockTitle_OeMC">./pyproject.toml</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">[tool.poetry.dependencies]</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">python = &quot;^3.10&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">uvicorn = {extras = [&quot;standard&quot;], version = &quot;^0.24.0.post1&quot;}</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">fastapi = &quot;^0.109.1&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">python-multipart = &quot;^0.0.7&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">email-validator = &quot;^2.1.0.post1&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">passlib = {extras = [&quot;bcrypt&quot;], version = &quot;^1.7.4&quot;}</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">tenacity = &quot;^8.2.3&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">pydantic = &quot;&gt;2.0&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">emails = &quot;^0.6&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">gunicorn = &quot;^21.2.0&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">jinja2 = &quot;^3.1.2&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">alembic = &quot;^1.12.1&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">python-jose = {extras = [&quot;cryptography&quot;], version = &quot;^3.3.0&quot;}</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">httpx = &quot;^0.25.1&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">psycopg = {extras = [&quot;binary&quot;], version = &quot;^3.1.13&quot;}</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">sqlmodel = &quot;^0.0.16&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"># Pin bcrypt until passlib supports the latest</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">bcrypt = &quot;4.0.1&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">pydantic-settings = &quot;^2.2.1&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">sentry-sdk = {extras = [&quot;fastapi&quot;], version = &quot;^1.40.6&quot;}</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">psycopg2 = &quot;^2.9.9&quot;</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">asyncpg = &quot;^0.29.0&quot;</span></span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="logging">Logging<a href="#logging" class="hash-link" aria-label="Direct link to Logging" title="Direct link to Logging" translate="no">​</a></h2>
<p>This module plays an important role in recording information, warnings, and errors during execution.</p>
<p>Log messages can provide information about system activities, input and output data, important events, and any issues that arise to aid in locating and fixing errors.</p>
<p>Let&#x27;s dive deeper into this module.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="log-level">Log Level<a href="#log-level" class="hash-link" aria-label="Direct link to Log Level" title="Direct link to Log Level" translate="no">​</a></h3>
<p>In Python, log level refers to the importance level of a log message and is used to specify the type of that message.</p>
<p><img decoding="async" loading="lazy" alt="Log level" src="/assets/images/log-level-811d6c4471c26845e34d0f56297f3266.png" width="539" height="120" class="img_ev3q"></p>
<ol>
<li class=""><strong>DEBUG</strong>: Log level for debug messages, typically used to record detailed information for debugging and development purposes.</li>
<li class=""><strong>INFO</strong>: Log level for informational messages, often used to record normal operations in the application.</li>
<li class=""><strong>WARNING</strong>: Log level for warning messages, usually used to record unexpected or potential situations that do not affect the application&#x27;s operation.</li>
<li class=""><strong>ERROR</strong>: Log level for error messages, typically used to record situations that cause errors during application execution.</li>
<li class=""><strong>CRITICAL</strong>: Log level for critical error messages, commonly used to log fatal errors that may prevent the application from continuing.</li>
</ol>
<p>In my experience, I often use DEBUG log level in the development environment. When the application is moved to production, I will hide the DEBUG level. Typically, only logs from INFO level or higher are allowed to be printed.</p>
<p>To get more knowledge about this part, you can refer to this <a href="https://stackoverflow.com/questions/2031163/when-to-use-the-different-log-levels" target="_blank" rel="noopener noreferrer" class="">https://stackoverflow.com/questions/2031163/when-to-use-the-different-log-levels</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="log-format">Log Format<a href="#log-format" class="hash-link" aria-label="Direct link to Log Format" title="Direct link to Log Format" translate="no">​</a></h3>
<p>By default, the log format looks very simple. The problem is that this simplicity makes it lack information and become difficult to read.</p>
<p><img decoding="async" loading="lazy" alt="Log before format" src="data:image/png;base64,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" width="296" height="121" class="img_ev3q"></p>
<p>Let&#x27;s say you put a log inside a function and it&#x27;s used multiple times. The special thing is that when the system is operating, you can&#x27;t always sit next to the screen to check whether that function records errors or not? And at what point does the error occur? Ha ha… a classic example.</p>
<p>To solve that problem, log formatting is the key solution. It helps you and your system get through the darkest days.</p>
<p>For example, I have different formats for files and consoles.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockTitle_OeMC">./app/core/logger.py</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">console_msg_format </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;%(asctime)s %(levelname)s: %(message)s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Create the root logger.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">getLogger</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Set up logging to the console.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">stream_handler </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">StreamHandler</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">stream_formatter </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">Formatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">console_msg_format</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">stream_handler</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setFormatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">stream_formatter</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">addHandler</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">stream_handler</span><span class="token punctuation" style="color:#475569">)</span></span><br></span></code></pre></div></div>
<p>The logs will look like</p>
<p><img decoding="async" loading="lazy" alt="Log after format" src="/assets/images/log-after-format-be02caa2e90a129a2fe3990aab86adeb.png" width="846" height="378" class="img_ev3q"></p>
<p>Even though the log format has been changed, it still doesn&#x27;t seem easy to follow. Next, what we&#x27;re going to do to improve it is add color to the log. At this point, I offer a simple solution to make the log better.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockTitle_OeMC">./app/core/logger.py</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#0c4a6e">class</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">ColoredFormatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">Formatter</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    COLOR_CODES </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#64748b">&#x27;DEBUG&#x27;</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;\033[94m&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">  </span><span class="token comment" style="color:#6A9955"># blue</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#64748b">&#x27;INFO&#x27;</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;\033[92m&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">   </span><span class="token comment" style="color:#6A9955"># green</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#64748b">&#x27;WARNING&#x27;</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;\033[93m&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">  </span><span class="token comment" style="color:#6A9955"># yellow</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#64748b">&#x27;ERROR&#x27;</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;\033[91m&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">  </span><span class="token comment" style="color:#6A9955"># red</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token string" style="color:#64748b">&#x27;CRITICAL&#x27;</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;\033[41m\033[97m&#x27;</span><span class="token plain">  </span><span class="token comment" style="color:#6A9955"># red background color and white text</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    RESET_CODE </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;\033[0m&#x27;</span><span class="token plain">  </span><span class="token comment" style="color:#6A9955"># called to return to standard terminal text color</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">def</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">format</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> record</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token comment" style="color:#6A9955"># Get the color corresponding to the log level</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        color </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">COLOR_CODES</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">record</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">levelname</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;&#x27;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token comment" style="color:#6A9955"># Add color to log messages and reset color at the end</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        formatted_message </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#64748b">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">{</span><span class="token string-interpolation interpolation">color</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">}</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">{</span><span class="token string-interpolation interpolation builtin" style="color:#0c4a6e">super</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">(</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">)</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">.</span><span class="token string-interpolation interpolation builtin" style="color:#0c4a6e">format</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">(</span><span class="token string-interpolation interpolation">record</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">)</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">}</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">.</span><span class="token string-interpolation interpolation">RESET_CODE</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">}</span><span class="token string-interpolation string" style="color:#64748b">&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> formatted_message</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">        </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">console_msg_format </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;%(asctime)s %(levelname)s: %(message)s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Create the root logger.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">getLogger</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Set up logging to the console.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">stream_handler </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">StreamHandler</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">stream_formatter </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> ColoredFormatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">console_msg_format</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">stream_handler</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setFormatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">stream_formatter</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">addHandler</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">stream_handler</span><span class="token punctuation" style="color:#475569">)</span></span><br></span></code></pre></div></div>
<p>The result ^_^:</p>
<p><img decoding="async" loading="lazy" alt="Log after color format" src="/assets/images/log-after-color-format-f83ee03080912e0e4c49fb9f0e7fb22a.png" width="777" height="107" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="logging-to-multiple-sources">Logging to Multiple Sources<a href="#logging-to-multiple-sources" class="hash-link" aria-label="Direct link to Logging to Multiple Sources" title="Direct link to Logging to Multiple Sources" translate="no">​</a></h3>
<p>We have customized the log format for printing to the console in the above sections. If we only print to the console, when we restart the application, the logs on the console will be reset... We have lost all the old logs.</p>
<p>So, we need to store logs to multiple sources. As far as I know, we can store locations like files, databases, or online log services.</p>
<p>You can integrate with other tools like <a href="https://www.elastic.co/elastic-stack" target="_blank" rel="noopener noreferrer" class="">Elasticsearch, Logstash, Kibana (ELK Stack)</a>.</p>
<p><img decoding="async" loading="lazy" alt="ELK Stack" src="/assets/images/elk-stack-f7aeaa3db5976184f807559892635028.png" width="875" height="314" class="img_ev3q"></p>
<p>Or <a href="https://grafana.com/docs/loki/latest/" target="_blank" rel="noopener noreferrer" class="">Promtail, Loki and Grafana</a> for simpler setup.</p>
<p><img decoding="async" loading="lazy" alt="Promtail, Loki and Grafana" src="/assets/images/promtail-grafana-loki-7acece030148c5a7d3e70e7da5d15e9b.png" width="2000" height="733" class="img_ev3q"></p>
<p>In this post, we will discuss how to log into a file and some considerations to remember regarding this process.</p>
<p>With just a few lines of code, you can log into a specific file anywhere you want.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockTitle_OeMC">./app/core/logger.py</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token comment" style="color:#6A9955"># Create the root logger.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">getLogger</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">basicConfig</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">level</span><span class="token operator" style="color:#475569">=</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Set up logging to the file.</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_handler </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">FileHandler</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&#x27;app.log&#x27;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token comment" style="color:#6A9955"># &lt;--- File location</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_handler</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">formatter </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">Formatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&#x27;%(asctime)s - %(levelname)s - %(message)s&#x27;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_handler</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setFormatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">formatter</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">addHandler</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">file_handler</span><span class="token punctuation" style="color:#475569">)</span></span><br></span></code></pre></div></div>
<p>Let’s see the results.</p>
<p><img decoding="async" loading="lazy" alt="Logging to Multiple Sources Result" src="/assets/images/logging-to-multiple-sources-result-e85178779650f2f71214dbfbba47f2e9.png" width="801" height="253" class="img_ev3q"></p>
<p>As you can see, <code>app.log</code> automatically creates and contains all the logs we print. However, that&#x27;s not enough. We cannot simply dump all the system logs into a single file and monitor the logs from there. It is terrible! (＃°Д°)</p>
<p>To avoid that, what we need is a log rotation. It helps us manage file size, the maximum number of backup files if the file size exceeds the threshold.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockTitle_OeMC">./app/core/logger.py</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token comment" style="color:#6A9955"># Define default logfile format.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_name_format </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;{year:04d}{month:02d}{day:02d}.log&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Define the default logging message formats.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_msg_format </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;%(asctime)s %(levelname)-8s: %(message)s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">console_msg_format </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;%(levelname)s: %(message)s&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Define the log rotation criteria.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">max_bytes </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1024</span><span class="token operator" style="color:#475569">**</span><span class="token number" style="color:#B5CEA8">2</span><span class="token plain">   </span><span class="token comment" style="color:#6A9955"># ~ 1MB</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">backup_count </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">100</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Create the root logger.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">getLogger</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Validate the given directory.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token builtin" style="color:#0c4a6e">dir</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;log&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token builtin" style="color:#0c4a6e">dir</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">normpath</span><span class="token punctuation" style="color:#475569">(</span><span class="token builtin" style="color:#0c4a6e">dir</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Create a folder for the logfiles.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">not</span><span class="token plain"> os</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">exists</span><span class="token punctuation" style="color:#475569">(</span><span class="token builtin" style="color:#0c4a6e">dir</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    os</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">makedirs</span><span class="token punctuation" style="color:#475569">(</span><span class="token builtin" style="color:#0c4a6e">dir</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Construct the name of the logfile.</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">t </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> file_name_format</span><span class="token punctuation" style="color:#475569">.</span><span class="token builtin" style="color:#0c4a6e">format</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    year</span><span class="token operator" style="color:#475569">=</span><span class="token plain">t</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    month</span><span class="token operator" style="color:#475569">=</span><span class="token plain">t</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">month</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    day</span><span class="token operator" style="color:#475569">=</span><span class="token plain">t</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">day</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#475569">(</span><span class="token builtin" style="color:#0c4a6e">dir</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> file_name</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token comment" style="color:#6A9955"># Set up logging to the logfile.</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_handler </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">handlers</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">RotatingFileHandler</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    filename</span><span class="token operator" style="color:#475569">=</span><span class="token plain">file_name</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> maxBytes</span><span class="token operator" style="color:#475569">=</span><span class="token plain">max_bytes</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> backupCount</span><span class="token operator" style="color:#475569">=</span><span class="token plain">backup_count</span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_handler</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_formatter </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">Formatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">file_msg_format</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">file_handler</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">setFormatter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">file_formatter</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">logger</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">addHandler</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">file_handler</span><span class="token punctuation" style="color:#475569">)</span></span><br></span></code></pre></div></div>
<p>If you&#x27;re not familiar with how this module works, the <code>RotatingFileHandler</code> class has the following description:</p>
<blockquote>
<p>Rollover occurs whenever the current log file is nearly maxBytes in length. If backupCount is &gt;= 1, the system will successively create new files with the same pathname as the base file, but with extensions &quot;.1&quot;, &quot;.2&quot; etc. appended to it. For example, with a backupCount of 5 and a base file name of &quot;app.log&quot;, you would get &quot;app.log&quot;, &quot;app.log.1&quot;, &quot;app.log.2&quot;, ... through to &quot;app.log.5&quot;. The file being written to is always &quot;app.log&quot; - when it gets filled up, it is closed and renamed to &quot;app.log.1&quot;, and if files &quot;app.log.1&quot;, &quot;app.log.2&quot; etc. exist, then they are renamed to &quot;app.log.2&quot;, &quot;app.log.3&quot; etc. respectively.</p>
</blockquote>
<blockquote>
<p>If maxBytes is zero, rollover never occurs.</p>
</blockquote>
<p>In the example, I set the <code>maxBytes</code> value to 1MB, so if the size of the log file reaches 1MB, it will be moved to a backup file (<code>20240405.log.1</code>, <code>20240405.log.2</code>), and new logs will continue to be written to the current file (<code>20240405.log</code>).</p>
<p><img decoding="async" loading="lazy" alt="Logging to Multiple Sources Rotation Example" src="/assets/images/logging-to-multiple-sources-rotation-example-d7ee2979e161a55730a77f1c1c1d6f1c.png" width="833" height="288" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance">Performance<a href="#performance" class="hash-link" aria-label="Direct link to Performance" title="Direct link to Performance" translate="no">​</a></h3>
<p>Logging in the system may seem lightweight, but in reality, it still consumes time and a certain amount of system resources, especially when performing concurrent logging from multiple threads or processes.</p>
<p>Specifying log levels, optimizing log structure, and configuring rotation also significantly reduce the burden on the system. Additionally, we can consider asynchronous logging and reduce the number of logging operations to reduce the load on the storage system, especially when handling large log volumes.</p>
<p>In FastAPI, you can use <a href="https://fastapi.tiangolo.com/tutorial/background-tasks/" target="_blank" rel="noopener noreferrer" class="">Background Tasks</a> to log asynchronously, which reduces system load and request latency.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> Any</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> fastapi </span><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> BackgroundTasks</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> logging</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#475569">@self</span><span class="token decorator annotation punctuation" style="color:#475569">.</span><span class="token decorator annotation punctuation" style="color:#475569">router</span><span class="token decorator annotation punctuation" style="color:#475569">.</span><span class="token decorator annotation punctuation" style="color:#475569">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token string" style="color:#64748b">&quot;/something&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">def</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">handle_something</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    bg_task</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> BackgroundTasks</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token operator" style="color:#475569">-</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> Any</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    bg_task</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">add_task</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#64748b">f&quot;This is log&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;something&quot;</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span></span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="integration-with-fastapi">Integration with FastAPI<a href="#integration-with-fastapi" class="hash-link" aria-label="Direct link to Integration with FastAPI" title="Direct link to Integration with FastAPI" translate="no">​</a></h3>
<p>In my experience, you should wrap up all configurations into a function and call it when initializing the FastAPI application. In the new FastAPI version, <a href="https://fastapi.tiangolo.com/advanced/events/#lifespan" target="_blank" rel="noopener noreferrer" class="">Lifespan Events</a> will help you do that.</p>
<p>For instance:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockTitle_OeMC">./app/main.py</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> contextlib </span><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> asynccontextmanager</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> app</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">logger </span><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> setup </span><span class="token keyword" style="color:#0c4a6e">as</span><span class="token plain"> setup_logging</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> app</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">config </span><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> settings</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#475569">@asynccontextmanager</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">def</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">lifespan</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">app</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> FastAPI</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#6A9955"># start up</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    setup_logging</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">minLevel</span><span class="token operator" style="color:#475569">=</span><span class="token plain">logging</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">DEBUG</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">yield</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:#6A9955"># shut down</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">pass</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">app </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> FastAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    title</span><span class="token operator" style="color:#475569">=</span><span class="token plain">settings</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">PROJECT_NAME</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    openapi_url</span><span class="token operator" style="color:#475569">=</span><span class="token string-interpolation string" style="color:#64748b">f&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">{</span><span class="token string-interpolation interpolation">settings</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">.</span><span class="token string-interpolation interpolation">API_STR</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">}</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">{</span><span class="token string-interpolation interpolation">settings</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">.</span><span class="token string-interpolation interpolation">API_VERSION_STR</span><span class="token string-interpolation interpolation punctuation" style="color:#475569">}</span><span class="token string-interpolation string" style="color:#64748b">/openapi.json&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    lifespan</span><span class="token operator" style="color:#475569">=</span><span class="token plain">lifespan</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#0f172a"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span></span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="to-sum-up">To sum up<a href="#to-sum-up" class="hash-link" aria-label="Direct link to To sum up" title="Direct link to To sum up" translate="no">​</a></h2>
<p>We discussed an essential module in developing applications with FastAPI: Logging. By carefully and effectively using this module, we can build and maintain powerful and flexible FastAPI applications. Hopefully, this article has given you the overview and knowledge needed to use this important module in your projects.</p>
<p>If you need a project to run a demo on your environment, here are my <a href="https://github.com/pxuanbach/fastapi-essential-modules" target="_blank" rel="noopener noreferrer" class="">Git repository</a>.</p>
<p>See you again!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References" translate="no">​</a></h2>
<ul>
<li class=""><a href="https://github.com/borntyping/python-colorlog" target="_blank" rel="noopener noreferrer" class="">borntyping/python-colorlog: A colored formatter for the python logging module (github.com)</a></li>
<li class=""><a href="https://github.com/acschaefer/duallog/tree/master" target="_blank" rel="noopener noreferrer" class="">acschaefer/duallog: Python package to enable simultaneous logging to console and logfile (github.com)</a></li>
</ul></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/logging">logging</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/fastapi">fastapi</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/python">python</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/essential-modules-fastapi">essential-modules-fastapi</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/dockerizing-medusajs-for-optimized-deployment"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Dockerize MedusaJS Components: Optimize and Deploy Your Application</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/essential-modules-for-developing-applications-with-fastapi-p1-migration"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Essential modules for developing applications with FastAPI (P1 - Migration)</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#frameworklibrary-version" class="table-of-contents__link toc-highlight">Framework/Library version</a></li><li><a href="#logging" class="table-of-contents__link toc-highlight">Logging</a><ul><li><a href="#log-level" class="table-of-contents__link toc-highlight">Log Level</a></li><li><a href="#log-format" class="table-of-contents__link toc-highlight">Log Format</a></li><li><a href="#logging-to-multiple-sources" class="table-of-contents__link toc-highlight">Logging to Multiple Sources</a></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li><li><a href="#integration-with-fastapi" class="table-of-contents__link toc-highlight">Integration with FastAPI</a></li></ul></li><li><a href="#to-sum-up" class="table-of-contents__link toc-highlight">To sum up</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">ImmersedinCode Blog</div><ul class="footer__items clean-list"><li class="footer__item"><p>Simplicity is the soul of efficiency.</p></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/pxuanbach" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:pxuanbach1412@gmail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gmail<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/pham-bach-97a389217/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Bach Pham, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>