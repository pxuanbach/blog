"use strict";(globalThis.webpackChunkme=globalThis.webpackChunkme||[]).push([[8143],{2568(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var s=r(109),i=r(4848),o=r(8453);const a={slug:"dockerizing-medusajs-for-optimized-deployment",title:"Dockerize MedusaJS Components: Optimize and Deploy Your Application",authors:["pxuanbach"],tags:["deployment","docker","open-source","medusajs","nodejs"],date:"2024-04-14T10:00",image:"/img/04_dockerizing-medusajs-for-optimized-deployment/featured.png"},t=void 0,d={authorsImageUrls:[void 0]},c=[{value:"Introduction",id:"introduction",level:2},{value:"What is MedusaJS?",id:"what-is-medusajs",level:3},{value:"Why containerize Medusa applications?",id:"why-containerize-medusa-applications",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Docker &amp; Docker Compose",id:"docker--docker-compose",level:3},{value:"Node or NVM",id:"node-or-nvm",level:3},{value:"Git",id:"git",level:3},{value:"Medusa CLI",id:"medusa-cli",level:3},{value:"Create Medusa Backend",id:"create-medusa-backend",level:3},{value:"Create Medusa Storefront",id:"create-medusa-storefront",level:3},{value:"Containerize Medusa application",id:"containerize-medusa-application",level:2},{value:"Backend",id:"backend",level:3},{value:"Admin UI",id:"admin-ui",level:3},{value:"Storefront",id:"storefront",level:3},{value:"Manage containers",id:"manage-containers",level:2},{value:"Manage environment variables",id:"manage-environment-variables",level:3},{value:"Docker Compose configuration",id:"docker-compose-configuration",level:3},{value:"Launch all services",id:"launch-all-services",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"References",id:"references",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:'Today, I say "Hi Medusa!\u201d.'}),"\n",(0,i.jsx)(n.p,{children:"Recently, I received a request from my director. It involves developing an e-commerce product for a retail business client group. They require a customized solution for self-deployment in their environment."}),"\n",(0,i.jsx)(n.p,{children:"The requirement is for an e-commerce source code that I and teammates can customize, and add features to meet the needs of each customer. After researching through various open-source platforms such as WooCommerce, Vendure, Saleor,... we decided to choose MedusaJS."}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-medusajs",children:"What is MedusaJS?"}),"\n",(0,i.jsx)(n.p,{children:"MedusaJS is a set of commerce modules and tools that allow you to build rich, reliable, and performant commerce applications without reinventing core commerce logic. The modules can be customized and used to build advanced e-commerce stores, marketplaces, or any product that needs foundational commerce primitives. All modules are open-source and freely available on npm."}),"\n",(0,i.jsxs)(n.p,{children:["Learn more about\xa0",(0,i.jsx)(n.a,{href:"https://docs.medusajs.com/development/fundamentals/architecture-overview",children:"Medusa\u2019s architecture"}),"\xa0and\xa0",(0,i.jsx)(n.a,{href:"https://docs.medusajs.com/modules/overview",children:"commerce modules"}),"\xa0in the Docs."]}),"\n",(0,i.jsx)(n.h3,{id:"why-containerize-medusa-applications",children:"Why containerize Medusa applications?"}),"\n",(0,i.jsx)(n.p,{children:"The benefits of dockerizing an application, specifically Medusa, are manifold:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Set up development environments swiftly: With Docker Compose, you can set up your development environment with just a few commands. For instance, cloning source code, creating a ",(0,i.jsx)(n.code,{children:".env"})," file, and running ",(0,i.jsx)(n.code,{children:"docker-compose up -d"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Deploy easily in the cloud or on-premises: Once you build your Docker images, you can run them consistently on any server environment. It also helps you automate your application deployment and version management."}),"\n",(0,i.jsx)(n.li,{children:"Ensure scalability and flexibility: Dockerized applications are easier to scale and expand. By using Docker Swarm or Kubernetes, you can automatically scale the number of application containers to meet user demand without the need to reconfigure infrastructure."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.p,{children:"Some packages we need to install before proceeding further in this post."}),"\n",(0,i.jsx)(n.h3,{id:"docker--docker-compose",children:"Docker & Docker Compose"}),"\n",(0,i.jsx)(n.p,{children:"Visit the official link below and download the version that corresponds to your environment."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.docker.com/products/docker-desktop/",children:"Docker Desktop: The #1 Containerization Tool for Developers | Docker"})}),"\n",(0,i.jsx)(n.h3,{id:"node-or-nvm",children:"Node or NVM"}),"\n",(0,i.jsx)(n.p,{children:"Visit the official link below and download the version that corresponds to your environment."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://nodejs.org/en/download",children:"Node.js \u2014 Download Node.js\xae (nodejs.org)"})}),"\n",(0,i.jsx)(n.p,{children:"I suggest you install version 18 or greater because:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Backend Admin needs Node v16+"}),"\n",(0,i.jsx)(n.li,{children:"Storefront needs Node v18+"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Or"})," install ",(0,i.jsx)(n.a,{href:"https://github.com/nvm-sh/nvm?tab=readme-ov-file#installing-and-updating",children:"nvm"})," instead to install any version of NodeJS"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\r\n\r\n# Or\r\nwget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash\n"})}),"\n",(0,i.jsx)(n.p,{children:"If your environment is Windows, you may like this one"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/coreybutler/nvm-windows?tab=readme-ov-file",children:"coreybutler/nvm-windows: A node.js version management utility for Windows. Ironically written in Go. (github.com)"})}),"\n",(0,i.jsx)(n.h3,{id:"git",children:"Git"}),"\n",(0,i.jsx)(n.p,{children:"Visit the official link below and download the version that corresponds to your environment."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://git-scm.com/downloads",children:"Git - Downloads (git-scm.com)"})}),"\n",(0,i.jsx)(n.h3,{id:"medusa-cli",children:"Medusa CLI"}),"\n",(0,i.jsx)(n.p,{children:"To install the Medusa backend, you need Medusa's CLI tool."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install -g @medusajs/medusa-cli\n"})}),"\n",(0,i.jsx)(n.p,{children:"Once done, check the version using this command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"medusa --version\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Medusa CLI Version",src:r(9150).A+"",width:"483",height:"36"})}),"\n",(0,i.jsx)(n.h3,{id:"create-medusa-backend",children:"Create Medusa Backend"}),"\n",(0,i.jsx)(n.p,{children:"We can easily create the backend with the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx create-medusa-app --skip-db\n"})}),"\n",(0,i.jsxs)(n.p,{children:["I use the ",(0,i.jsx)(n.code,{children:"\u2014skip-db"})," option because I will have a different setup later."]}),"\n",(0,i.jsx)(n.p,{children:"Now wait a moment\u2026"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Create Medusa App",src:r(4307).A+"",width:"903",height:"424"})}),"\n",(0,i.jsx)(n.h3,{id:"create-medusa-storefront",children:"Create Medusa Storefront"}),"\n",(0,i.jsxs)(n.p,{children:["Create a new Next.js project using the\xa0",(0,i.jsx)(n.a,{href:"https://github.com/medusajs/nextjs-starter-medusa",children:"Medusa starter Storefront"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx create-next-app -e https://github.com/medusajs/nextjs-starter-medusa storefront\n"})}),"\n",(0,i.jsx)(n.h2,{id:"containerize-medusa-application",children:"Containerize Medusa application"}),"\n",(0,i.jsx)(n.h3,{id:"backend",children:"Backend"}),"\n",(0,i.jsxs)(n.p,{children:["First, create the ",(0,i.jsx)(n.code,{children:"develop.sh"})," file with this content and place it in the ",(0,i.jsx)(n.code,{children:"/backend"})," folder."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="./backend/develop.sh"',children:"#!/bin/bash\r\n\r\nmedusa migrations run\r\n\r\nmedusa $1\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Next, create a ",(0,i.jsx)(n.code,{children:"Dockerfile"})," with this content in the same directory as in the previous step."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",metastring:'showLineNumbers title="./backend/Dockerfile"',children:'### Dependencies ###\r\nFROM node:20-alpine as deps\r\nWORKDIR /app/\r\n\r\n# Copy backend package package.json and yarn.lock from /backend\r\nCOPY ./package*.json .\r\nCOPY ./yarn.lock? .\r\n\r\n# Install deps\r\nRUN yarn install --frozen-lockfile\r\n\r\n### Build ###\r\nFROM node:20-alpine as builder\r\nWORKDIR /app/\r\n\r\n# Copy cached node_modules from deps\r\nCOPY --from=deps /app/node_modules /app/node_modules\r\n\r\n# Install python and medusa-cli\r\nRUN apk update\r\nRUN apk add python3\r\nRUN yarn global add @medusajs/medusa-cli@latest\r\n\r\n# Copy app source code\r\nCOPY . /app\r\n\r\n# Build the app\r\nRUN yarn build\r\n\r\n# Start the image with a shell script\r\nENTRYPOINT ["/bin/sh", "./develop.sh", "start"]\n'})}),"\n",(0,i.jsx)(n.p,{children:"The result:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Container Medusa Application Backend Result",src:r(4209).A+"",width:"1228",height:"976"})}),"\n",(0,i.jsx)(n.h3,{id:"admin-ui",children:"Admin UI"}),"\n",(0,i.jsx)(n.p,{children:"According to the announcement, the admin UI source code has been moved into the core repository since version 1.8. So, we won't have the source code to build the Docker image anymore."}),"\n",(0,i.jsx)(n.p,{children:"Wait, hold on\u2026"}),"\n",(0,i.jsxs)(n.p,{children:["When you run the command ",(0,i.jsx)(n.code,{children:"medusa develop"}),", the admin UI will build static javascript and HTML files into the ",(0,i.jsx)(n.code,{children:"/backend/build"})," directory, so we need to copy it and serve it with nginx."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["A small note is that if you deploy it in production, you can configure it not to build the admin UI. Splitting it into two separate Docker images is the approach I'm currently taking. Check ",(0,i.jsx)(n.a,{href:"https://docs.medusajs.com/admin/configuration#in-development---disabled-serve",children:"this one"}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:["First, create the ",(0,i.jsx)(n.code,{children:"admin.nginx.conf"})," file with this content and place it in the ",(0,i.jsx)(n.code,{children:"/backend"})," folder."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-plaintext",metastring:'showLineNumbers title="./backend/admin.nginx.conf"',children:"server {\r\n    listen 80 default_server;\r\n    server_name localhost;\r\n    charset utf-8;\r\n    root /usr/share/nginx/html;\r\n\r\n    location / {\r\n        try_files $uri $uri/ /index.html =404;\r\n    }\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Next, create a ",(0,i.jsx)(n.code,{children:"Dockerfile"})," with this content in the same directory as in the previous step."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",metastring:'showLineNumbers title="./backend/Dockerfile.admin"',children:'### Build ###\r\nFROM node:20-alpine as builder\r\nWORKDIR /app\r\n\r\nENV NODE_ENV=production\r\nENV NODE_OPTIONS=--openssl-legacy-provider\r\n\r\n# Copy medusa package.json and yarn.lock from /backend\r\nCOPY ./package*.json .\r\nCOPY ./yarn.lock? .\r\n\r\n# Install deps\r\nRUN yarn install --frozen-lockfile\r\n\r\n# Copy app source code\r\nCOPY . /app\r\n\r\nRUN yarn build:admin:prod\r\n\r\n### Runner ###\r\nFROM nginx:1.16.0-alpine as runner\r\n\r\n# Copy nginx.conf from /backend\r\nCOPY admin.nginx.conf /etc/nginx/conf.d/default.conf\r\n\r\nRUN apk add --no-cache bash\r\n\r\nEXPOSE 80 \r\n\r\n# Copy static files from Build stage\r\nCOPY --from=builder /app/build /usr/share/nginx/html\r\n\r\n# Image entrypoint\r\nENTRYPOINT ["nginx", "-g", "daemon off;"]\n'})}),"\n",(0,i.jsx)(n.p,{children:"The result:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Container Medusa Application Admin UI Result",src:r(6976).A+"",width:"1223",height:"980"})}),"\n",(0,i.jsx)(n.h3,{id:"storefront",children:"Storefront"}),"\n",(0,i.jsxs)(n.p,{children:["Similar to the components above, we will have the following ",(0,i.jsx)(n.code,{children:"Dockerfile"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",metastring:'showLineNumbers title="./storefront/Dockerfile"',children:'### Dependencies ###\r\nFROM node:20-alpine as deps\r\nWORKDIR /app\r\n\r\n# Copy storefront package.json and yarn.lock from /storefront\r\nCOPY ./package*.json .\r\nCOPY ./yarn.lock? .\r\n\r\n# Install deps and launch patch-package\r\nRUN yarn install --frozen-lockfile\r\n\r\n### Build ###\r\nFROM node:20-alpine as builder\r\nWORKDIR /app\r\n\r\n# Copy cached root and package node_modules from deps\r\nCOPY --from=deps /app/node_modules /app/node_modules\r\n\r\n# Copy app source code\r\nCOPY . /app\r\n\r\n# Build the app\r\nRUN yarn build\r\n\r\n# Run the builded app\r\nENTRYPOINT [ "yarn", "start" ]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"manage-containers",children:"Manage containers"}),"\n",(0,i.jsx)(n.p,{children:"With the above sections, we are ready to build and deploy the Docker image. Next, I will introduce how I manage the containers and configure them for deployment using Docker Compose."}),"\n",(0,i.jsx)(n.h3,{id:"manage-environment-variables",children:"Manage environment variables"}),"\n",(0,i.jsxs)(n.p,{children:["Firstly, we should provide some environment variables for the app. In ",(0,i.jsx)(n.code,{children:"/backend"}),", create a ",(0,i.jsx)(n.code,{children:".env"})," file and paste this content:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:'JWT_SECRET=something\r\nCOOKIE_SECRET=something\r\n\r\nPOSTGRES_USER=postgres\r\nPOSTGRES_PASSWORD=CHANGE_ME\r\nPOSTGRES_DB=medusa\r\n\r\nDATABASE_TYPE="postgres"\r\nREDIS_URL=redis://redis\r\nDATABASE_URL=postgres://postgres:CHANGE_ME@postgres:5432/medusa\r\nSTORE_CORS=/http://.+/\r\nADMIN_CORS=/http://.+/\r\nAUTH_CORS=/http://.+/\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Check out the documentation ",(0,i.jsx)(n.a,{href:"https://docs.medusajs.com/development/backend/configurations#environment-variables",children:"https://docs.medusajs.com/development/backend/configurations#environment-variables"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Next, in ",(0,i.jsx)(n.code,{children:"/storefront"}),", make a copy of ",(0,i.jsx)(n.code,{children:".env.template"})," to ",(0,i.jsx)(n.code,{children:".env.local"}),". Then change the value of ",(0,i.jsx)(n.code,{children:"NEXT_PUBLIC_MEDUSA_BACKEND_URL"})," variable to ",(0,i.jsx)(n.code,{children:"http://host.docker.internal:9000"}),", if you use Windows."]}),"\n",(0,i.jsx)(n.h3,{id:"docker-compose-configuration",children:"Docker Compose configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Let\u2019s create a ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file at the same level as the ",(0,i.jsx)(n.code,{children:"/backend"})," and ",(0,i.jsx)(n.code,{children:"/storefront"})," directories."]}),"\n",(0,i.jsx)(n.p,{children:"I declare configurations for the database and Redis as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'showLineNumbers title="./docker-compose.yml"',children:'version: "3.8"\r\nservices:\r\n  postgres:\r\n    image: postgres:12\r\n    ports:\r\n      - "54322:5432"\r\n    env_file: ./backend/.env\r\n    volumes:\r\n      - app-db-data:/var/lib/postgresql/data:cached\r\n\r\n  redis:\r\n    image: redis\r\n    expose:\r\n      - 6379\r\n\r\nvolumes:\r\n  app-db-data:\n'})}),"\n",(0,i.jsx)(n.p,{children:"These are the services that must be ready before the application container is initialized and connected to them."}),"\n",(0,i.jsx)(n.p,{children:"Now I will define the backend and admin UI services."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'showLineNumbers title="./docker-compose.yml"',children:'...\r\n  backend:\r\n    build:\r\n      context: ./backend\r\n      dockerfile: Dockerfile\r\n    image: pxuanbach/medusa-backend\r\n    depends_on:\r\n      - postgres\r\n      - redis\r\n    env_file: ./backend/.env\r\n    ports:\r\n      - "9000:9000"\r\n\r\n  admin:\r\n    build:\r\n      context: ./backend\r\n      dockerfile: Dockerfile.admin\r\n    image: pxuanbach/medusa-backend-admin\r\n    depends_on:\r\n      - postgres\r\n      - redis\r\n    ports:\r\n      - "7001:80"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The last service is ",(0,i.jsx)(n.code,{children:"storefront"}),", it needs to be initialized after the backend service. So, here is its configuration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'showLineNumbers title="./docker-compose.yml"',children:'...\r\n  storefront:\r\n    build:\r\n      context: ./storefront\r\n      dockerfile: Dockerfile.prod\r\n    image: pxuanbach/medusa-storefront\r\n    depends_on:\r\n      - backend\r\n    ports:\r\n      - "8000:8000"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"launch-all-services",children:"Launch all services"}),"\n",(0,i.jsxs)(n.p,{children:["After configuring the ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file, we will run it to see how it operates."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d --build postgres redis backend admin\r\n\r\n# waiting...\r\n# init seed data (Optional)\r\ndocker-compose exec backend yarn seed\r\n\r\n# wait...\r\ndocker-compose up -d --build storefront\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In the above command, I run ",(0,i.jsx)(n.code,{children:"backend"})," before ",(0,i.jsx)(n.code,{children:"storefront"}),". Because the storefront needs to fetch the region from the backend to build successfully."]}),"\n",(0,i.jsx)(n.p,{children:"Once done, check the results:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Admin Panel: ",(0,i.jsx)(n.a,{href:"http://localhost:7001",children:"http://localhost:7001"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Medusa Admin UI",src:r(84).A+"",width:"940",height:"484"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Backend: ",(0,i.jsx)(n.a,{href:"http://localhost:9000/store/products",children:"http://localhost:9000/store/products"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Medusa Backend API",src:r(2972).A+"",width:"946",height:"424"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Storefront: ",(0,i.jsx)(n.a,{href:"http://localhost:8000",children:"http://localhost:8000"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Medusa Storefront UI",src:r(6384).A+"",width:"950",height:"385"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Notes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.em,{children:["If you cannot connect to the Admin Panel or Storefront via Docker container, try changing the default host of each to ",(0,i.jsx)(n.code,{children:"0.0.0.0"}),"."]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.em,{children:"Storefront needs to fetch the regions from the Backend. So, you should initialize your Backend data first."})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsxs)(n.p,{children:["I hope this post was useful. If you need a project to run a demo on your environment, here is my\xa0",(0,i.jsx)(n.a,{href:"https://github.com/pxuanbach/medusa-ecommerce",children:"Git repository"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["In this repository, I have separated into 2 compose configurations. The configuration of this post is equivalent to ",(0,i.jsx)(n.code,{children:"prod"})," configuration in the repos. Additionally, I created a script called ",(0,i.jsx)(n.code,{children:"start-up.sh"})," in the demo repository. It will help us to start all services automatically."]}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/medusajs/docker-medusa/pull/13",children:"feat: update backend and storefront dockerfiles by mickeiik \xb7 Pull Request #13 \xb7 medusajs/docker-medusa (github.com)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.medusajs.com/development/backend/install",children:"Install Medusa Backend | Medusa (medusajs.com)"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},6976(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/containerize-medusa-app-adminui-result-80d9ffdfc55a7cf8bcc8b419c32361ec.png"},4209(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/containerize-medusa-app-backend-result-962331292fe40bda0c13eb185c260391.png"},4307(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/create-medusa-app-daaf0cf6aff936479aebf907c10bfadd.png"},84(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/medusa-adminui-23799872eae7d4f26f9adb1ae5f64e66.png"},2972(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/medusa-backend-api-2198368348e0205458c1cb38866826ef.png"},9150(e,n,r){r.d(n,{A:()=>s});const s="data:image/png;base64,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"},6384(e,n,r){r.d(n,{A:()=>s});const s=r.p+"assets/images/medusa-storefront-ui-fc00ac45461d1e4875e6e55fb9ccf4d5.png"},8453(e,n,r){r.d(n,{R:()=>a,x:()=>t});var s=r(6540);const i={},o=s.createContext(i);function a(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:n},e.children)}},109(e){e.exports=JSON.parse('{"permalink":"/blog/dockerizing-medusajs-for-optimized-deployment","source":"@site/blog/04_dockerizing-medusajs-for-optimized-deployment/index.md","title":"Dockerize MedusaJS Components: Optimize and Deploy Your Application","description":"Today, I say \\"Hi Medusa!\u201d.","date":"2024-04-14T10:00:00.000Z","tags":[{"inline":true,"label":"deployment","permalink":"/blog/tags/deployment"},{"inline":true,"label":"docker","permalink":"/blog/tags/docker"},{"inline":true,"label":"open-source","permalink":"/blog/tags/open-source"},{"inline":true,"label":"medusajs","permalink":"/blog/tags/medusajs"},{"inline":true,"label":"nodejs","permalink":"/blog/tags/nodejs"}],"readingTime":8.31,"hasTruncateMarker":true,"authors":[{"name":"Bach Pham","title":"Software Engineer","url":"https://github.com/pxuanbach","imageURL":"https://avatars.githubusercontent.com/u/55500268?v=4","key":"pxuanbach","page":null}],"frontMatter":{"slug":"dockerizing-medusajs-for-optimized-deployment","title":"Dockerize MedusaJS Components: Optimize and Deploy Your Application","authors":["pxuanbach"],"tags":["deployment","docker","open-source","medusajs","nodejs"],"date":"2024-04-14T10:00","image":"/img/04_dockerizing-medusajs-for-optimized-deployment/featured.png"},"unlisted":false,"prevItem":{"title":"Essential modules for developing applications with FastAPI (P3 - Caching)","permalink":"/blog/essential-modules-for-developing-applications-with-fastapi-p3-caching"},"nextItem":{"title":"Essential modules for developing applications with FastAPI (P2 - Logging)","permalink":"/blog/essential-modules-for-developing-applications-with-fastapi-p2-logging"}}')}}]);